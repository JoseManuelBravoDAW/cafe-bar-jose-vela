---
import { fetchProductsByCategory } from '../services/fetchProducts';
import NavCarta from '../components/NavCarta.astro';
import Plato from '../components/Plato.astro';
import '../styles/NavBar.css'; // Asegúrate de que la ruta sea correcta

const category = 'entrantes'; // Cambia esta categoría según lo que necesites mostrar
interface Product {
  id: number;
  image: string;
  description: string;
  price: string;
  description2?: string;
  price2?: string;
  allergens?: string[];
}

const products: Product[] = await fetchProductsByCategory(category);
---

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Menú</title>
</head>
<body>
  <NavCarta />

  <div class="flex flex-wrap justify-center mx-4 my-4">
    {products.map(product => (
      <div class="w-full sm:w-1/2 md:w-1/3 lg:w-1/4 p-2">
        <Plato 
          product={{
            id: product.id,
            image: product.image,
            description: product.description,
            price: product.price,
            description2: product.description2,
            price2: product.price2,
            allergens: product.allergens
          }}
        />
      </div>
    ))}
  </div>
</body>
</html>

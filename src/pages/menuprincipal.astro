---
import { productsData } from '../data/products.js';
import NavCarta from '../components/NavCarta.astro';
import '../styles/menuprin.css';
import '../styles/carrusel.css';

const categories = Object.keys(productsData);
let selectedCategory = categories[0];
---

<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menú Principal</title>
  </head>
  <body>
    <NavCarta />
    <div class="menu-container">
      <h2 class="menu-title">Menú</h2>
      <p class="menu-description">Prueba nuestras exquisitas tapas y degusta nuestros platos del día.</p>
      
      <div class="carousel-container">
        <button class="carousel-button left" aria-label="Previous">&#9664;</button>
        <div class="carousel">
          {productsData[selectedCategory].map(product => (
            <div class="carousel-item">
              <img src={product.image} alt={product.description} class="carousel-image" />
              <h3 class="carousel-title">{product.description}</h3>
            </div>
          ))}
        </div>
        <button class="carousel-button right" aria-label="Next">&#9654;</button>
      </div>
    </div>
    
    <script type="module">
      import { productsData } from '../data/products.js';
      document.addEventListener('DOMContentLoaded', () => {
        const categoryLinks = document.querySelectorAll('.category-link');
        const carousel = document.querySelector('.carousel');
        const leftButton = document.querySelector('.carousel-button.left');
        const rightButton = document.querySelector('.carousel-button.right');

        categoryLinks.forEach(link => {
          link.addEventListener('click', (event) => {
            event.preventDefault();
            const category = link.getAttribute('href').substring(1);
            const products = productsData[category];

            carousel.innerHTML = products.map(product => `
              <div class="carousel-item">
                <img src="${product.image}" alt="${product.description}" class="carousel-image" />
                <h3 class="carousel-title">${product.description}</h3>
              </div>
            `).join('');
          });
        });

        leftButton.addEventListener('click', () => {
          carousel.scrollBy({ left: -300, behavior: 'smooth' });
        });

        rightButton.addEventListener('click', () => {
          carousel.scrollBy({ left: 300, behavior: 'smooth' });
        });
      });
    </script>
  </body>
</html>